## 11.1
#### -10.44
android端点击推送消息，发送通知到JS
#### -14.07
集成华为推送
#### -18.20
接收与点击华为推送的消息
在其他手机上会提示安装华为移动服务，所以绝对不能在其他手机上连接华为推送。

安装完成后，还需要打开华为移动服务的所有权限。通过keytool获取到SHA256指纹证书后填入到华为开放平台，等10分钟左右生效。

和小米的配置方式不同，小米使用方法调用来初始化服务，华为需要在manifest中配置，所以要在主app的manifest中配置，而不能在module中

```
<meta-data
    android:name="com.huawei.hms.client.appid"
    android:value="100122645" />
```

华为的sdk和文档都写的很垃圾，文档甚至都没有设置tags的方法，
sdk必须在connect成功后才可以启动推送，也就是必须在在onConnected回调中才能申请token来启动Push服务`HuaweiPush.HuaweiPushApi.getToken(hwClient)`。运行后弹出华为使用协议就表示成功了

在网页中测试发送推送也不能发送给所有人，只能通过IMEI或标签

点击推送的消息后，将发来的消息转换为HashMap。华为的数据有点奇葩，用Java转换费了番功夫

```java
// 华为推送的extras结构：
"[{"key1: "value1"}, {"key2: value2"}]"
// 小米推送的extras结构：
{"key1": "value1", "key2": "value2"}
```

通过HuaweiPush.HuaweiPushApi.setTags来设置tag，但是传入的类型是map，和小米不同，小米是设置字符串类型的alias。但是设置后不生效。

官方文档原文：
注意：切换到HMS Push后，原来的setTag/getTag/deleteTag功能暂时不可用，老版本push sdk现在也无法上报新增标签，目前在华为开发者联盟portal上面仅支持根据存量的标签推送消息。HMS SDK会在后续版本实现该功能。  
垃圾          

